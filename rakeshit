local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local draw = Drawing.new
local cam = workspace.CurrentCamera
local plr = game.Players.LocalPlayer
local rs = game:GetService("RunService")
local repStorage = game:GetService("ReplicatedStorage")

local box = draw("Square")
box.Visible = false
box.Color = Color3.new(1,0,0)
box.Thickness = 2

local name = draw("Text")
name.Visible = false
name.Color = Color3.new(1,0,0)
name.Size = 18
name.Center = true
name.Outline = true
name.Text = "RAKE"

local dist = draw("Text")
dist.Visible = false
dist.Color = Color3.new(1,1,1)
dist.Size = 14
dist.Center = true
dist.Outline = true

local tracer = draw("Line")
tracer.Visible = false
tracer.Color = Color3.new(1,0,0)
tracer.Thickness = 1

local scrapESP = {}
local flareESP = {}
local supplyESP = {}
local configValues = {}

local sprintEnabled = false
local espEnabled = false
local scrapEnabled = false
local flareEnabled = false
local supplyEnabled = false
local lightEnabled = false
local camUnlocked = false
local zoomLock = 15
local brightness = 1
local showName = true
local showDist = true
local showTracer = false
local espColor = Color3.new(1,0,0)
local boxThick = 1
local textSize = 15
local autoPickup = false
local pickupRange = 10

local scrapColor = Color3.new(1,1,1)
local scrapSize = 14
local scrapThick = 1
local flareColor = Color3.new(1,0.5,0)
local flareSize = 16
local flareThick = 2
local supplyColor = Color3.new(0,1,1)
local supplySize = 16
local supplyThick = 2

local scrapColors = {
    [1] = Color3.new(0.5,0.5,0.5),
    [2] = Color3.new(0,0.7,0),
    [3] = Color3.new(0,0.5,1),
    [4] = Color3.new(0.7,0,1),
    [5] = Color3.new(1,0.8,0),
}

local Window = Rayfield:CreateWindow({
   Name = "rake shit",
   LoadingTitle = "rake shit",
   LoadingSubtitle = "loading...",
   Theme = "Default",
   DisableRayfieldPrompts = true,
   ConfigurationSaving = {
      Enabled = false,
      FolderName = "RakeSHIT",
      FileName = "config"
   }
})

local MainTab = Window:CreateTab("Main", 4483362458)
local SettingsTab = Window:CreateTab("Settings", 4483362458)
local InfoTab = Window:CreateTab("Info", 4483362458)
local ConfigTab = Window:CreateTab("Config", 4483362458)
local ExperimentalTab = Window:CreateTab("Experimental", 4483362458)

local ESPSection = MainTab:CreateSection("ESP")

local ESPToggle = MainTab:CreateToggle({
   Name = "Rake ESP",
   CurrentValue = false,
   Flag = "esp",
   Callback = function(v)
      espEnabled = v
      configValues.esp = v
   end,
})

local ScrapToggle = MainTab:CreateToggle({
   Name = "Scrap ESP",
   CurrentValue = false,
   Flag = "scrapesp",
   Callback = function(v)
      scrapEnabled = v
      configValues.scrapesp = v
      if not v then
         for _,esp in pairs(scrapESP) do
            esp.box.Visible = false
            esp.text.Visible = false
            esp.dist.Visible = false
         end
      end
   end,
})

local FlareToggle = MainTab:CreateToggle({
   Name = "Flare Gun ESP",
   CurrentValue = false,
   Flag = "flareesp",
   Callback = function(v)
      flareEnabled = v
      configValues.flareesp = v
      if not v and flareESP.box then
         flareESP.box.Visible = false
         flareESP.text.Visible = false
         flareESP.dist.Visible = false
      end
   end,
})

local SupplyToggle = MainTab:CreateToggle({
   Name = "Supply Box ESP",
   CurrentValue = false,
   Flag = "supplyesp",
   Callback = function(v)
      supplyEnabled = v
      configValues.supplyesp = v
      if not v then
         for _,esp in pairs(supplyESP) do
            esp.box.Visible = false
            esp.text.Visible = false
            esp.dist.Visible = false
         end
      end
   end,
})

local VisualsSection = MainTab:CreateSection("VISUALS")

local LightToggle = MainTab:CreateToggle({
   Name = "Fullbright + No Effects",
   CurrentValue = false,
   Flag = "light",
   Callback = function(v)
      lightEnabled = v
      configValues.light = v
      if v then
         for _,effect in pairs(game.Lighting:GetChildren()) do
            if effect:IsA("BlurEffect") or effect:IsA("DepthOfFieldEffect") or effect:IsA("SunRaysEffect") or effect:IsA("BloomEffect") or effect:IsA("ColorCorrectionEffect") then
               effect.Enabled = false
            end
         end
      end
   end,
})

local BrightSlider = MainTab:CreateSlider({
   Name = "Brightness",
   Range = {0, 5},
   Increment = 0.5,
   Suffix = "",
   CurrentValue = 1,
   Flag = "bright",
   Callback = function(v)
      brightness = v
      configValues.bright = v
   end,
})

local CamToggle = MainTab:CreateToggle({
   Name = "Unlock Camera",
   CurrentValue = false,
   Flag = "cam",
   Callback = function(v)
      camUnlocked = v
      configValues.cam = v
   end,
})

local ZoomSlider = MainTab:CreateSlider({
   Name = "Camera Distance",
   Range = {5, 50},
   Increment = 5,
   Suffix = "",
   CurrentValue = 15,
   Flag = "zoom",
   Callback = function(v)
      zoomLock = v
      configValues.zoom = v
   end,
})

local CharacterSection = MainTab:CreateSection("CHARACTER")

local SprintToggle = MainTab:CreateToggle({
   Name = "Infinite Sprint",
   CurrentValue = false,
   Flag = "sprint",
   Callback = function(v)
      sprintEnabled = v
      configValues.sprint = v
   end,
})

local AutoPickupToggle = MainTab:CreateToggle({
   Name = "Auto Pickup Scrap",
   CurrentValue = false,
   Flag = "autopickup",
   Callback = function(v)
      autoPickup = v
      configValues.autopickup = v
   end,
})

local PickupRangeSlider = MainTab:CreateSlider({
   Name = "Pickup Range",
   Range = {5, 50},
   Increment = 5,
   Suffix = "m",
   CurrentValue = 10,
   Flag = "pickuprange",
   Callback = function(v)
      pickupRange = v
      configValues.pickuprange = v
   end,
})

local RakeSection = SettingsTab:CreateSection("RAKE")

local ColorPicker = SettingsTab:CreateColorPicker({
   Name = "Rake Color",
   Color = Color3.fromRGB(255, 0, 0),
   Flag = "espcolor",
   Callback = function(v)
      espColor = v
      configValues.espcolor = {v.R * 255, v.G * 255, v.B * 255}
      box.Color = v
      name.Color = v
      tracer.Color = v
   end
})

local ThickSlider = SettingsTab:CreateSlider({
   Name = "Box Thickness",
   Range = {1, 5},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 1,
   Flag = "thick",
   Callback = function(v)
      boxThick = v
      configValues.thick = v
      box.Thickness = v
   end,
})

local TextSlider = SettingsTab:CreateSlider({
   Name = "Text Size",
   Range = {10, 30},
   Increment = 2,
   Suffix = "px",
   CurrentValue = 15,
   Flag = "textsize",
   Callback = function(v)
      textSize = v
      configValues.textsize = v
      name.Size = v
      dist.Size = v - 4
   end,
})

local NameToggle = SettingsTab:CreateToggle({
   Name = "Show Name",
   CurrentValue = true,
   Flag = "showname",
   Callback = function(v)
      showName = v
      configValues.showname = v
   end,
})

local DistToggle = SettingsTab:CreateToggle({
   Name = "Show Distance",
   CurrentValue = true,
   Flag = "showdist",
   Callback = function(v)
      showDist = v
      configValues.showdist = v
   end,
})

local TracerToggle = SettingsTab:CreateToggle({
   Name = "Show Tracer",
   CurrentValue = false,
   Flag = "tracer",
   Callback = function(v)
      showTracer = v
      configValues.tracer = v
   end,
})

local ScrapSection = SettingsTab:CreateSection("SCRAP")

local ScrapColorToggle = SettingsTab:CreateToggle({
   Name = "Use Rarity Colors",
   CurrentValue = true,
   Flag = "scrapraritycolor",
   Callback = function(v)
      configValues.scrapraritycolor = v
   end,
})

local ScrapColorPicker = SettingsTab:CreateColorPicker({
   Name = "Scrap Color (If not rarity)",
   Color = Color3.fromRGB(255, 255, 255),
   Flag = "scrapcolor",
   Callback = function(v)
      scrapColor = v
      configValues.scrapcolor = {v.R * 255, v.G * 255, v.B * 255}
   end
})

local ScrapSizeSlider = SettingsTab:CreateSlider({
   Name = "Scrap Text Size",
   Range = {10, 20},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 14,
   Flag = "scrapsize",
   Callback = function(v)
      scrapSize = v
      configValues.scrapsize = v
   end,
})

local ScrapThickSlider = SettingsTab:CreateSlider({
   Name = "Scrap Box Thickness",
   Range = {1, 5},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 1,
   Flag = "scrapthick",
   Callback = function(v)
      scrapThick = v
      configValues.scrapthick = v
   end,
})

local FlareSection = SettingsTab:CreateSection("FLARE GUN")

local FlareColorPicker = SettingsTab:CreateColorPicker({
   Name = "Flare Color",
   Color = Color3.fromRGB(255, 128, 0),
   Flag = "flarecolor",
   Callback = function(v)
      flareColor = v
      configValues.flarecolor = {v.R * 255, v.G * 255, v.B * 255}
      flareESP.box.Color = v
      flareESP.text.Color = v
   end
})

local FlareSizeSlider = SettingsTab:CreateSlider({
   Name = "Flare Text Size",
   Range = {10, 25},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 16,
   Flag = "flaresize",
   Callback = function(v)
      flareSize = v
      configValues.flaresize = v
      flareESP.text.Size = v
   end,
})

local FlareThickSlider = SettingsTab:CreateSlider({
   Name = "Flare Box Thickness",
   Range = {1, 5},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 2,
   Flag = "flarethick",
   Callback = function(v)
      flareThick = v
      configValues.flarethick = v
      flareESP.box.Thickness = v
   end,
})

local SupplySection = SettingsTab:CreateSection("SUPPLY BOX")

local SupplyColorPicker = SettingsTab:CreateColorPicker({
   Name = "Supply Color",
   Color = Color3.fromRGB(0, 255, 255),
   Flag = "supplycolor",
   Callback = function(v)
      supplyColor = v
      configValues.supplycolor = {v.R * 255, v.G * 255, v.B * 255}
   end
})

local SupplySizeSlider = SettingsTab:CreateSlider({
   Name = "Supply Text Size",
   Range = {10, 25},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 16,
   Flag = "supplysize",
   Callback = function(v)
      supplySize = v
      configValues.supplysize = v
   end,
})

local SupplyThickSlider = SettingsTab:CreateSlider({
   Name = "Supply Box Thickness",
   Range = {1, 5},
   Increment = 1,
   Suffix = "px",
   CurrentValue = 2,
   Flag = "supplythick",
   Callback = function(v)
      supplyThick = v
      configValues.supplythick = v
   end,
})

-- Config Tab
local configFolder = "RakeConfigs"
local configs = {}
local autoLoadConfig = nil

local function refreshConfigs()
    configs = {}
    if isfolder(configFolder) then
        for _,file in pairs(listfiles(configFolder)) do
            local name = file:match("([^/]+)%.json$")
            if name then
                table.insert(configs, name)
            end
        end
    end
    return configs
end

if not isfolder(configFolder) then
    makefolder(configFolder)
end

-- check for autoload
if isfile(configFolder.."/autoload.txt") then
    autoLoadConfig = readfile(configFolder.."/autoload.txt")
end

local selectedConfig = "default"

local ConfigDropdown = ConfigTab:CreateDropdown({
    Name = "Select Config",
    Options = refreshConfigs(),
    CurrentOption = {"default"},
    MultipleOptions = false,
    Flag = "configselect",
    Callback = function(v)
        selectedConfig = v[1] or "default"
    end,
})

local ConfigInput = ConfigTab:CreateInput({
    Name = "Config Name",
    PlaceholderText = "Enter config name",
    CurrentValue = "",
    Flag = "configname",
    Callback = function(v)
        selectedConfig = v ~= "" and v or selectedConfig
    end,
})

local SaveButton = ConfigTab:CreateButton({
    Name = "Save Config",
    Callback = function()
        writefile(configFolder.."/"..selectedConfig..".json", game:GetService("HttpService"):JSONEncode(configValues))
        ConfigDropdown:Set(refreshConfigs())
    end,
})

local LoadButton = ConfigTab:CreateButton({
    Name = "Load Config",
    Callback = function()
        if isfile(configFolder.."/"..selectedConfig..".json") then
            local data = game:GetService("HttpService"):JSONDecode(readfile(configFolder.."/"..selectedConfig..".json"))
            
            ESPToggle:Set(data.esp or false)
            ScrapToggle:Set(data.scrapesp or false)
            FlareToggle:Set(data.flareesp or false)
            SupplyToggle:Set(data.supplyesp or false)
            LightToggle:Set(data.light or false)
            SprintToggle:Set(data.sprint or false)
            CamToggle:Set(data.cam or false)
            AutoPickupToggle:Set(data.autopickup or false)
            BrightSlider:Set(data.bright or 1)
            ZoomSlider:Set(data.zoom or 15)
            PickupRangeSlider:Set(data.pickuprange or 10)
            ThickSlider:Set(data.thick or 1)
            TextSlider:Set(data.textsize or 15)
            NameToggle:Set(data.showname ~= false)
            DistToggle:Set(data.showdist ~= false)
            TracerToggle:Set(data.tracer or false)
            ScrapColorToggle:Set(data.scrapraritycolor ~= false)
            ScrapSizeSlider:Set(data.scrapsize or 14)
            ScrapThickSlider:Set(data.scrapthick or 1)
            FlareSizeSlider:Set(data.flaresize or 16)
            FlareThickSlider:Set(data.flarethick or 2)
            SupplySizeSlider:Set(data.supplysize or 16)
            SupplyThickSlider:Set(data.supplythick or 2)
            
            if data.espcolor then
                ColorPicker:Set(Color3.fromRGB(data.espcolor[1], data.espcolor[2], data.espcolor[3]))
            end
            if data.scrapcolor then
                ScrapColorPicker:Set(Color3.fromRGB(data.scrapcolor[1], data.scrapcolor[2], data.scrapcolor[3]))
            end
            if data.flarecolor then
                FlareColorPicker:Set(Color3.fromRGB(data.flarecolor[1], data.flarecolor[2], data.flarecolor[3]))
            end
            if data.supplycolor then
                SupplyColorPicker:Set(Color3.fromRGB(data.supplycolor[1], data.supplycolor[2], data.supplycolor[3]))
            end
        end
    end,
})

local DeleteButton = ConfigTab:CreateButton({
    Name = "Delete Config",
    Callback = function()
        if selectedConfig ~= "default" and isfile(configFolder.."/"..selectedConfig..".json") then
            delfile(configFolder.."/"..selectedConfig..".json")
            ConfigDropdown:Set(refreshConfigs())
            selectedConfig = "default"
        end
    end,
})

local RefreshButton = ConfigTab:CreateButton({
    Name = "Refresh List",
    Callback = function()
        ConfigDropdown:Set(refreshConfigs())
    end,
})

local AutoLoadButton = ConfigTab:CreateButton({
    Name = "Set as Auto-Load",
    Callback = function()
        writefile(configFolder.."/autoload.txt", selectedConfig)
        autoLoadConfig = selectedConfig
    end,
})

local ClearAutoLoadButton = ConfigTab:CreateButton({
    Name = "Clear Auto-Load",
    Callback = function()
        if isfile(configFolder.."/autoload.txt") then
            delfile(configFolder.."/autoload.txt")
            autoLoadConfig = nil
        end
    end,
})

local CreditLabel = InfoTab:CreateLabel("made by t.me/rakeshittnes")
local TimerLabel = InfoTab:CreateLabel("Time: 0:00")
local PowerLabel = InfoTab:CreateLabel("Power: 0%")
local DoorLabel = InfoTab:CreateLabel("SafeHouse Door: OFF")
local SHLightLabel = InfoTab:CreateLabel("SafeHouse Light: OFF")
local TowerLabel = InfoTab:CreateLabel("Tower Light: OFF")

local ExperimentalLabel = ExperimentalTab:CreateLabel("Testing Features!")

local function createScrapESP(model)
    if scrapESP[model] then return end
    
    local esp = {}
    esp.box = draw("Square")
    esp.box.Thickness = 1
    esp.box.Filled = false
    esp.box.Visible = false
    
    esp.text = draw("Text")
    esp.text.Size = 14
    esp.text.Center = true
    esp.text.Outline = true
    esp.text.Visible = false
    
    esp.dist = draw("Text")
    esp.dist.Size = 12
    esp.dist.Center = true
    esp.dist.Outline = true
    esp.dist.Visible = false
    
    scrapESP[model] = esp
end

local function createSupplyESP(model)
    if supplyESP[model] then return end
    
    local esp = {}
    esp.box = draw("Square")
    esp.box.Thickness = supplyThick
    esp.box.Filled = false
    esp.box.Visible = false
    esp.box.Color = supplyColor
    
    esp.text = draw("Text")
    esp.text.Size = supplySize
    esp.text.Center = true
    esp.text.Outline = true
    esp.text.Visible = false
    esp.text.Color = supplyColor
    esp.text.Text = "SUPPLY BOX"
    
    esp.dist = draw("Text")
    esp.dist.Size = 14
    esp.dist.Center = true
    esp.dist.Outline = true
    esp.dist.Visible = false
    esp.dist.Color = Color3.new(1,1,1)
    
    supplyESP[model] = esp
end

flareESP.box = draw("Square")
flareESP.box.Thickness = 2
flareESP.box.Filled = false
flareESP.box.Visible = false
flareESP.box.Color = Color3.new(1,0.5,0)

flareESP.text = draw("Text")
flareESP.text.Size = 16
flareESP.text.Center = true
flareESP.text.Outline = true
flareESP.text.Visible = false
flareESP.text.Color = Color3.new(1,0.5,0)
flareESP.text.Text = "FLARE GUN"

flareESP.dist = draw("Text")
flareESP.dist.Size = 14
flareESP.dist.Center = true
flareESP.dist.Outline = true
flareESP.dist.Visible = false
flareESP.dist.Color = Color3.new(1,1,1)

if autoLoadConfig and isfile(configFolder.."/"..autoLoadConfig..".json") then
    task.wait(0.5)
    selectedConfig = autoLoadConfig
    LoadButton.Callback()
end

rs.RenderStepped:Connect(function()
    if lightEnabled then
        local l = game.Lighting
        l.Brightness = brightness
        l.Ambient = Color3.new(0.7,0.7,0.7)
        l.OutdoorAmbient = Color3.new(0.7,0.7,0.7)
        l.FogEnd = 100000
        l.ClockTime = 14
    end
    
    if camUnlocked then
        plr.CameraMinZoomDistance = zoomLock
        plr.CameraMaxZoomDistance = zoomLock
        plr.CameraMode = Enum.CameraMode.Classic
    end
    
    if sprintEnabled and plr.Character and plr.Character:FindFirstChild("Humanoid") then
        plr.Character.Humanoid.WalkSpeed = 25
    end
    
    if autoPickup and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
        local filter = workspace:FindFirstChild("Filter")
        if filter then
            local spawns = filter:FindFirstChild("ScrapSpawns")
            if spawns then
                for _,itemSpawn in pairs(spawns:GetChildren()) do
                    if itemSpawn.Name:match("ItemSpawn") then
                        for _,scrapFolder in pairs(itemSpawn:GetChildren()) do
                            if scrapFolder.Name:match("Scrap%d") then
                                local scrapPart = scrapFolder:FindFirstChild("Scrap")
                                if scrapPart and scrapPart:FindFirstChild("TouchInterest") then
                                    local dist = (plr.Character.HumanoidRootPart.Position - scrapPart.Position).Magnitude
                                    if dist <= pickupRange then
                                        firetouchinterest(plr.Character.HumanoidRootPart, scrapPart, 0)
                                        firetouchinterest(plr.Character.HumanoidRootPart, scrapPart, 1)
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    local timer = repStorage:FindFirstChild("Timer")
    if timer then
        local mins = math.floor(timer.Value / 60)
        local secs = timer.Value % 60
        TimerLabel:Set(string.format("Time: %d:%02d", mins, secs))
    end
    
    local power = repStorage:FindFirstChild("PowerValues")
    if power then
        if power:FindFirstChild("PowerLevel") then
            PowerLabel:Set("Power: "..math.floor(power.PowerLevel.Value / 10).."%")
        end
        if power:FindFirstChild("UsingSHDoor") then
            DoorLabel:Set("SafeHouse Door: "..(power.UsingSHDoor.Value and "ON" or "OFF"))
        end
        if power:FindFirstChild("UsingSHLight") then
            SHLightLabel:Set("SafeHouse Light: "..(power.UsingSHLight.Value and "ON" or "OFF"))
        end
        if power:FindFirstChild("UsingTowerLight") then
            TowerLabel:Set("Tower Light: "..(power.UsingTowerLight.Value and "ON" or "OFF"))
        end
    end
    
    if scrapEnabled then
        local filter = workspace:FindFirstChild("Filter")
        if filter then
            local spawns = filter:FindFirstChild("ScrapSpawns")
            if spawns then
                for _,itemSpawn in pairs(spawns:GetChildren()) do
                    if itemSpawn.Name:match("ItemSpawn") then
                        for _,scrapFolder in pairs(itemSpawn:GetChildren()) do
                            if scrapFolder.Name:match("Scrap%d") then
                                local scrapPart = scrapFolder:FindFirstChild("Scrap")
                                if scrapPart then
                                    createScrapESP(scrapPart)
                                    local esp = scrapESP[scrapPart]
                                    
                                    if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                                        local pos, vis = cam:WorldToViewportPoint(scrapPart.Position)
                                        if vis then
                                            local size = 1500 / pos.Z
                                            esp.box.Size = Vector2.new(size, size)
                                            esp.box.Position = Vector2.new(pos.X - size/2, pos.Y - size/2)
                                            esp.box.Thickness = scrapThick
                                            
                                            local level = scrapFolder:FindFirstChild("LevelVal")
                                            local points = scrapFolder:FindFirstChild("PointsVal")
                                            
                                            if configValues.scrapraritycolor ~= false and level then
                                                esp.box.Color = scrapColors[level.Value] or Color3.new(1,1,1)
                                            else
                                                esp.box.Color = scrapColor
                                            end
                                            
                                            local textY = pos.Y + size/2 + 5
                                            local levelText = level and "Lvl "..level.Value or ""
                                            local pointText = points and points.Value.."pts" or "???"
                                            
                                            esp.text.Position = Vector2.new(pos.X, textY)
                                            esp.text.Text = levelText..(levelText ~= "" and " | " or "")..pointText
                                            esp.text.Color = esp.box.Color
                                            esp.text.Size = scrapSize
                                            
                                            esp.dist.Position = Vector2.new(pos.X, textY + scrapSize + 2)
                                            esp.dist.Text = math.floor((plr.Character.HumanoidRootPart.Position - scrapPart.Position).Magnitude).."m"
                                            esp.dist.Color = Color3.new(1,1,1)
                                            esp.dist.Size = scrapSize - 2
                                            esp.dist.Visible = true
                                            
                                            esp.box.Visible = true
                                            esp.text.Visible = true
                                        else
                                            esp.box.Visible = false
                                            esp.text.Visible = false
                                            esp.dist.Visible = false
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    if flareEnabled then
        local flarePickup = workspace:FindFirstChild("FlareGunPickUp")
        if flarePickup then
            local flareGun = flarePickup:FindFirstChild("FlareGun")
            if flareGun and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local pos, vis = cam:WorldToViewportPoint(flareGun.Position)
                if vis then
                    local size = 1800 / pos.Z
                    flareESP.box.Size = Vector2.new(size, size)
                    flareESP.box.Position = Vector2.new(pos.X - size/2, pos.Y - size/2)
                    flareESP.box.Visible = true
                    flareESP.box.Thickness = flareThick
                    flareESP.box.Color = flareColor
                    
                    flareESP.text.Position = Vector2.new(pos.X, pos.Y + size/2 + 5)
                    flareESP.text.Visible = true
                    flareESP.text.Size = flareSize
                    flareESP.text.Color = flareColor
                    
                    flareESP.dist.Position = Vector2.new(pos.X, pos.Y + size/2 + 5 + flareSize + 2)
                    flareESP.dist.Text = math.floor((plr.Character.HumanoidRootPart.Position - flareGun.Position).Magnitude).."m"
                    flareESP.dist.Visible = true
                else
                    flareESP.box.Visible = false
                    flareESP.text.Visible = false
                    flareESP.dist.Visible = false
                end
            else
                flareESP.box.Visible = false
                flareESP.text.Visible = false
                flareESP.dist.Visible = false
            end
        end
    end

    if supplyEnabled then
        local debris = workspace:FindFirstChild("Debris")
        if debris then
            local crates = debris:FindFirstChild("SupplyCrates")
            if crates then
                for _,crate in pairs(crates:GetChildren()) do
                    if crate:IsA("Model") then
                        createSupplyESP(crate)
                        local esp = supplyESP[crate]
                        
                        if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                            local cf = crate:GetBoundingBox()
                            local pos, vis = cam:WorldToViewportPoint(cf.Position)
                            if vis then
                                local size = 2500 / pos.Z
                                esp.box.Size = Vector2.new(size, size)
                                esp.box.Position = Vector2.new(pos.X - size/2, pos.Y - size/2)
                                esp.box.Thickness = supplyThick
                                esp.box.Color = supplyColor
                                esp.box.Visible = true
                                
                                esp.text.Position = Vector2.new(pos.X, pos.Y + size/2 + 5)
                                esp.text.Size = supplySize
                                esp.text.Color = supplyColor
                                esp.text.Visible = true
                                
                                esp.dist.Position = Vector2.new(pos.X, pos.Y + size/2 + 5 + supplySize + 2)
                                esp.dist.Text = math.floor((plr.Character.HumanoidRootPart.Position - cf.Position).Magnitude).."m"
                                esp.dist.Visible = true
                            else
                                esp.box.Visible = false
                                esp.text.Visible = false
                                esp.dist.Visible = false
                            end
                        end
                    end
                end
            end
        end
    end
    
    if espEnabled then
        local rake = workspace:FindFirstChild("Rake")
        if rake and rake:FindFirstChild("HumanoidRootPart") and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local pos, vis = cam:WorldToViewportPoint(rake.HumanoidRootPart.Position)
            if vis then
                local size = 2000 / pos.Z
                box.Size = Vector2.new(size, size * 2)
                box.Position = Vector2.new(pos.X - size/2, pos.Y - size)
                box.Visible = true
                
                name.Position = Vector2.new(pos.X, pos.Y - size - 20)
                name.Visible = showName
                
                dist.Position = Vector2.new(pos.X, pos.Y + size + 5)
                dist.Text = math.floor((plr.Character.HumanoidRootPart.Position - rake.HumanoidRootPart.Position).Magnitude).."m"
                dist.Visible = showDist
                
                if showTracer then
                    tracer.From = Vector2.new(cam.ViewportSize.X/2, cam.ViewportSize.Y)
                    tracer.To = Vector2.new(pos.X, pos.Y)
                    tracer.Visible = true
                else
                    tracer.Visible = false
                end
            else
                box.Visible = false
                name.Visible = false
                dist.Visible = false
                tracer.Visible = false
            end
        else
            box.Visible = false
            name.Visible = false
            dist.Visible = false
            tracer.Visible = false
        end
    else
        box.Visible = false
        name.Visible = false
        dist.Visible = false
        tracer.Visible = false
    end
end)

workspace.DescendantRemoving:Connect(function(obj)
    if scrapESP[obj] then
        scrapESP[obj].box:Remove()
        scrapESP[obj].text:Remove()
        scrapESP[obj].dist:Remove()
        scrapESP[obj] = nil
    end
    if supplyESP[obj] then
        supplyESP[obj].box:Remove()
        supplyESP[obj].text:Remove()
        supplyESP[obj].dist:Remove()
        supplyESP[obj] = nil
    end
end)
